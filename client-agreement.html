<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Принятие условий</title>

  <!-- Подключение Telegram WebApp API -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #ffffff;
      color: #333;
      line-height: 1.5;
      padding: 20px;
    }

    h1 {
      font-size: 1.4em;
      text-align: center;
      margin-bottom: 24px;
      font-weight: 600;
      color: #1a1a1a;
    }

    /* Стиль аккордеона */
    .accordion {
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      background: #fff;
      margin-bottom: 16px;
    }

    .accordion-header {
      padding: 16px;
      background-color: #f8f9fa;
      cursor: pointer;
      font-weight: 600;
      font-size: 1.1em;
      border-bottom: 1px solid #eaeaea;
      text-align: center;
    }

    .expand-hint {
      font-size: 0.85em;
      color: #888;
      text-align: center;
      padding: 10px 16px;
    }

    .accordion-body {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, opacity 0.3s ease;
      opacity: 0;
    }

    .accordion-body pre {
      white-space: pre-wrap;
      font-family: inherit;
      background: #f5f7fa;
      padding: 14px;
      border-radius: 8px;
      border-left: 4px solid #007BFF;
      margin: 10px 0;
      font-size: 0.95em;
      line-height: 1.5;
    }

    .accordion.active .accordion-body {
      max-height: 1000px;
      opacity: 1;
      padding: 16px;
    }

    /* Кнопки согласия */
    .consent-buttons {
      text-align: center;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #dee2e6;
    }

    .btn-consent {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      background-color: #28a745;
      color: white;
      cursor: pointer;
      font-size: 16px;
      margin: 10px;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: calc(100% - 20px);
      max-width: 300px;
    }

    .btn-deny {
      background-color: #6c757d;
    }

    .btn-consent:hover {
      opacity: 0.9;
      transform: scale(1.02);
    }
  </style>
</head>
<body>

  <!-- Заголовок -->
  <h1>Для работы с ботом необходимо принять условия:</h1>

  <!-- Блок 1: Договор-оферта -->
  <div class="accordion">
    <div class="accordion-header">Договор-оферта</div>
    <div class="expand-hint">Нажмите, чтобы развернуть</div>
    <div class="accordion-body">
      <pre>
Договор-оферта (Клиент — Исполнитель)
г. [город]
«_» __________ 20 г.
Общие положения
1.1. Настоящий документ является официальной публичной офертой в соответствии со ст. 435, 437 ГК РФ, адресованной физическим лицам, намеренным заказать услугу по выносу бытового мусора (далее — «Клиент» или «Заказчик»), и физическим лицам, намеренным выполнить указанную услугу (далее — «Исполнитель»).
1.2. Акцептом настоящей оферты считается подтверждение Исполнителем готовности выполнить заказ через Telegram-бота «[НАЗВАНИЕ ПЛАТФОРМЫ]» (нажатие кнопки «Принять заказ», либо аналогичное действие).
1.3. С момента акцепта настоящий договор считается заключённым между Заказчиком и Исполнителем.
Предмет договора
2.1. Исполнитель обязуется по заданию Заказчика оказать услугу по выносу бытового мусора (далее — «Работа»), а Заказчик обязуется принять результат Работы и оплатить его.
2.2. Объём, время, адрес и стоимость Работы определяются в индивидуальном заказе, сформированном Заказчиком в Платформе.
2.3. Платформа (Telegram-бот «[НАЗВАНИЕ]») не является стороной настоящего договора, а выступает исключительно как технический посредник для обмена информацией.
Цена и порядок оплаты
3.1. Цена Работы указывается Заказчиком при размещении заказа либо согласуется сторонами в переписке.
3.2. Оплата производится Заказчиком непосредственно Исполнителю в форме, согласованной сторонами (наличные, перевод по СБП, иные способы).
3.3. Платформа не участвует в расчётах между сторонами и не удерживает комиссий.
Права и обязанности сторон
4.1. Исполнитель обязан:
качественно выполнить Работу в согласованный срок;
самостоятельно обеспечивать наличие необходимых средств для выполнения Работы (пакеты, тележки и пр.);
уведомить Заказчика о невозможности выполнения Работы;
соблюдать правила вежливости и безопасности при контакте с Заказчиком.
4.2. Исполнитель имеет право:
получать от Заказчика полную и достоверную информацию, необходимую для выполнения Работы;
отказаться от исполнения заказа до начала Работы при уведомлении Заказчика.
4.3. Заказчик обязан:
предоставить Исполнителю доступ к месту выполнения Работы;
своевременно и в полном объёме оплатить выполненную Работу;
предоставить достоверные данные (адрес, объём, время).
4.4. Заказчик имеет право:
проверять качество и своевременность выполнения Работы;
требовать устранения недостатков или уменьшения цены, если работа выполнена ненадлежащим образом (в соответствии со ст. 723 ГК РФ).
Порядок приёмки Работы
5.1. После выполнения Работы Исполнитель уведомляет Заказчика о завершении через Платформу (кнопка «Выполнено» или сообщение).
5.2. Заказчик обязан в течение 24 часов подтвердить выполнение (в боте или иным способом).
5.3. В случае претензий Заказчик обязан сразу сообщить о них Исполнителю.
Доказательства исполнения
6.1. Стороны согласовывают, что доказательством исполнения или ненадлежащего исполнения Работы могут являться:
фото или видео отчёт;
отметка «Выполнено» в Платформе;
переписка в чате Платформы или мессенджере;
квитанции, чеки или иные документы.
6.2. Указанные материалы могут быть использованы сторонами в качестве доказательств при разрешении спора.
Ответственность сторон
7.1. Исполнитель несёт ответственность за качество и своевременность Работы.
7.2. Заказчик несёт ответственность за достоверность предоставленных данных и своевременную оплату.
7.3. Платформа не несёт ответственности за действия Заказчика и Исполнителя, а также за последствия исполнения/неисполнения настоящего договора.
Форс-мажор
8.1. Стороны освобождаются от ответственности за полное или частичное неисполнение обязательств по договору, если это произошло вследствие обстоятельств непреодолимой силы (форс-мажора): пожары, наводнения, отключения электричества, войны, блокировки сервисов и др.
Разрешение споров
9.1. Все споры и разногласия решаются путём переговоров.
9.2. При невозможности урегулирования спора — в судебном порядке по месту нахождения Исполнителя (если стороны не договорятся о другом).
Срок действия договора
10.1. Договор действует до полного исполнения обязательств сторонами по конкретному заказу.
10.2. Отдельные положения (о доказательствах, ответственности) сохраняют силу после завершения исполнения.</pre>
    </div>
  </div>

  <!-- Блок 2: Согласие на обработку ПДн -->
  <div class="accordion">
    <div class="accordion-header">Согласие на обработку ПДн</div>
    <div class="expand-hint">Нажмите, чтобы развернуть</div>
    <div class="accordion-body">
      <pre>
Соглашение о сборе, обработке и передаче персональных данных — для Клиента (Заказчика)
(текст-шаблон — вставить в бота как отдельную страницу/веб-страницу; при принятии в боте — считайте «акцептом»)
Общие положения
1.1. Настоящее Соглашение об обработке персональных данных (далее — «Соглашение») определяет порядок, цели и условия обработки персональных данных Пользователя (Заказчика) в рамках использования Telegram-бота «[НАЗВАНИЕ]» (далее — «Платформа»).
1.2. Оператор персональных данных — [ООО/ИП, ФИО, ИНН, адрес], контакт: [email/телефон].
1.3. Под персональными данными понимаются сведения, позволяющие прямо или косвенно идентифицировать физическое лицо: ФИО, телефон, адрес (адрес подъезда/квартира/этаж — в объёме, который укажет заказчик), данные заказа (дата/время/объём), а также иные данные, которые Заказчик предоставляет при создании заказа.
Цели обработки
2.1. Обработка ПД осуществляется для:
поиска и передачи заказа Исполнителям;
связи исполнителя и заказчика (контакты для согласования);
информирования Заказчика о статусе заказа;
выполнения обязательств по предоставлению сервиса.
Правовые основания
3.1. Правовым основанием обработки являются: согласие субъекта персональных данных (ст. 9 ФЗ-152) и необходимость выполнения договора/предоставления услуги.
КонсультантПлюс
Порядок и объём обрабатываемых данных
4.1. Обрабатываются только минимально необходимые данные: имя, телефон, адрес, параметры заказа. 4.2. Данные не собираются сверх целей в п.2.
Передача данных третьим лицам
5.1. Оператор вправе передавать необходимые данные Исполнителю, выбранному для выполнения заказа (имя, телефон, адрес, данные заказа) — исключительно в целях исполнения заказа. 5.2. Данные также могут передаваться платежным агрегаторам и операторам связи только при необходимости (при оплате подписки/работы платформы).
Срок хранения
6.1. Данные, необходимые для исполнения заказа, хранятся в течение срока исполнения + 6 месяцев (или другой срок, указать). 6.2. Данные аналитики — анонимизированы и хранятся до [указать срок].
Права субъекта ПД
7.1. Заказчик вправе: получать информацию о ПД, требовать исправления/удаления/ограничения обработки, отозвать согласие (отзыв не влияет на законность обработки до момента отзыва).
Безопасность
8.1. Оператор обеспечивает технические и организационные меры защиты (шифрование/ограничение доступа/логи), но не несёт ответственности за утечку в случае действий третьих лиц при соблюдении им правил безопасности.
Согласие
9.1. Простая форма для бота (текст, который размещается при /start):
«Нажимая «Принять», я, [ФИО], даю согласие [Название оператора] на сбор, обработку и передачу моих персональных данных (ФИО, телефон, адрес, данные заказа) в целях выполнения заказа и связи с исполнителем. Я ознакомлен(а) с политикой конфиденциальности [ссылка].»</pre>
    </div>
  </div>

  <!-- Блок 3: Пользовательское соглашение -->
  <div class="accordion">
    <div class="accordion-header">Пользовательское соглашение</div>
    <div class="expand-hint">Нажмите, чтобы развернуть</div>
    <div class="accordion-body">
      <pre>
Пользовательское соглашение
(для Клиентов (Заказчиков) Telegram-бота «[НАЗВАНИЕ ПЛАТФОРМЫ]»)
Общие положения
1.1. Настоящее Пользовательское соглашение (далее — «Соглашение») регулирует порядок и условия использования Telegram-бота «[НАЗВАНИЕ ПЛАТФОРМЫ]» (далее — «Платформа») Клиентами (Заказчиками).
1.2. Платформа является техническим сервисом, предоставляющим возможность размещать заказы на вынос бытового мусора и находить исполнителей.
1.3. Платформа не оказывает услуги по выносу мусора и не является стороной договоров между Клиентом и Исполнителем.
1.4. Использование Платформы означает согласие Клиента с настоящим Соглашением, Политикой конфиденциальности и иными документами Платформы.
Предмет соглашения
2.1. Платформа предоставляет Клиенту возможность:
размещать заказы на вынос бытового мусора;
передавать сведения об адресе, объёме и времени выполнения заказа;
получать контакты Исполнителя, согласившегося выполнить заказ.
2.2. Платформа не несёт ответственности за:
действия или бездействие Исполнителей;
качество и своевременность оказанных услуг;
споры между Клиентами и Исполнителями.
Права и обязанности Клиента
3.1. Клиент обязан:
предоставлять достоверные данные при размещении заказа (адрес, время, объём работ, контактный телефон);
своевременно оплачивать выполненные услуги Исполнителю;
использовать Платформу исключительно по назначению;
не размещать ложные заказы и не злоупотреблять функционалом.
3.2. Клиент имеет право:
размещать заказы через Платформу бесплатно;
получать контактные данные Исполнителя для согласования условий;
предъявлять Исполнителю претензии по качеству и срокам работы в порядке, установленном ГК РФ (гл. 37, договор подряда).
Порядок использования Платформы
4.1. Размещение заказа Клиентом считается офертой заключить договор подряда с Исполнителем.
4.2. Принятие заказа Исполнителем (нажатие кнопки «Принять» в Платформе) является акцептом оферты.
4.3. Договор считается заключённым в момент акцепта и исполняется в соответствии с нормами ГК РФ.
4.4. Оплата производится Клиентом напрямую Исполнителю (наличные, перевод по СБП и др.). Платформа не участвует в расчётах.
Ответственность сторон
5.1. Клиент несёт ответственность за достоверность предоставленных данных и своевременную оплату.
5.2. Исполнитель несёт ответственность за качество и сроки выполнения работы.
5.3. Платформа несёт ответственность только за обеспечение работоспособности сервиса и защиту персональных данных.
5.4. Платформа не гарантирует наличие или доступность Исполнителей в конкретный момент времени.
Ограничения и запреты
Клиенту запрещается:
использовать Платформу для противоправной деятельности;
размещать ложные или заведомо невыполнимые заказы;
передавать свои учётные данные третьим лицам;
распространять спам, рекламу или вирусное ПО через Платформу.
Персональные данные
7.1. Обработка персональных данных Клиента осуществляется в соответствии с Федеральным законом №152-ФЗ «О персональных данных».
7.2. Клиент даёт согласие на обработку персональных данных при регистрации и размещении заказа.
7.3. Полный порядок обработки ПД изложен в Политике конфиденциальности [ссылка].
Урегулирование споров
8.1. Все споры и разногласия между Клиентом и Исполнителем решаются ими напрямую.
8.2. Платформа не является стороной спора и не рассматривает претензии по качеству услуг.
8.3. При невозможности урегулирования спора стороны вправе обратиться в суд в порядке, установленном законодательством РФ.
Изменение условий
9.1. Платформа вправе в одностороннем порядке изменять настоящее Соглашение, публикуя обновлённый текст в интерфейсе бота.
9.2. Продолжение использования Платформы означает согласие Клиента с новой редакцией Соглашения.
Заключительные положения
10.1. Настоящее Соглашение является обязательным для всех Клиентов Платформы.
10.2. Вопросы, не урегулированные Соглашением, регулируются законодательством РФ.
10.3. Если какое-либо положение Соглашения признано недействительным, остальные сохраняют силу.</pre>
    </div>
  </div>

  <!-- Кнопки согласия -->
  <div class="consent-buttons">
    <button id="acceptBtn" class="btn-consent">
      ✅ Принять все
    </button>
    <button id="denyBtn" class="btn-consent btn-deny">
      ❌ Отказаться
    </button>
  </div>

  <!-- Логика аккордеона и Telegram WebApp -->
  <script>
    // Логирование для отладки
    console.log("📜 Страница загружена");
    console.log("🔍 Telegram WebApp доступен:", !!(window.Telegram && window.Telegram.WebApp));
    
    if (window.Telegram && window.Telegram.WebApp) {
      console.log("📱 WebApp версия:", window.Telegram.WebApp.version);
      console.log("📱 WebApp платформа:", window.Telegram.WebApp.platform);
      console.log("📱 WebApp initDataUnsafe:", window.Telegram.WebApp.initDataUnsafe);
      console.log("📱 WebApp доступные методы:", Object.getOwnPropertyNames(window.Telegram.WebApp));
      
      // Инициализация Telegram WebApp
      Telegram.WebApp.ready();
      Telegram.WebApp.expand();
      console.log("✅ Telegram WebApp инициализирован");
    }

    // Логика аккордеона
    document.querySelectorAll('.accordion-header').forEach(header => {
      header.addEventListener('click', () => {
        const accordion = header.parentElement;
        accordion.classList.toggle('active');
      });
    });

    // Инициализация обработчиков кнопок
    function initializeButtons() {
      console.log("🔧 Инициализируем обработчики кнопок");
      
      const acceptBtn = document.getElementById('acceptBtn');
      const denyBtn = document.getElementById('denyBtn');
      
      if (acceptBtn) {
        console.log("✅ Кнопка 'Принять' найдена");
        acceptBtn.addEventListener('click', acceptConsent);
      } else {
        console.error("❌ Кнопка 'Принять' не найдена");
      }
      
      if (denyBtn) {
        console.log("✅ Кнопка 'Отказаться' найдена");
        denyBtn.addEventListener('click', denyConsent);
      } else {
        console.error("❌ Кнопка 'Отказаться' не найдена");
      }
    }

    // Инициализация после загрузки DOM
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeButtons);
    } else {
      // DOM уже загружен
      initializeButtons();
    }

    // Функция принятия согласия
    function acceptConsent(event) {
      console.log("🟢 acceptConsent() вызвана");
      console.log("🖱️ Событие клика:", event);
      console.log("🎯 Цель события:", event.target);
      console.log("Пользователь принял все условия");

      try {
        if (window.Telegram && window.Telegram.WebApp) {
          console.log("📱 Telegram WebApp доступен, отправляем данные...");
          console.log("📱 WebApp версия:", window.Telegram.WebApp.version);
          console.log("📱 WebApp платформа:", window.Telegram.WebApp.platform);
          
          // Отправляем простую строку "accepted" как в рабочем боте
          const data = "accepted";
          console.log("📤 Отправляем данные:", data);
          
          try {
            window.Telegram.WebApp.sendData(data);
            console.log("✅ Данные отправлены успешно");
            
            // Показываем уведомление пользователю
            alert("✅ Согласие принято! Данные отправлены боту.");
            
            // Закрываем WebApp после отправки данных
            setTimeout(() => {
              window.Telegram.WebApp.close();
              console.log("✅ WebApp закрыт");
            }, 1000);
            
          } catch (error) {
            console.error("❌ Ошибка при отправке данных:", error);
            alert("Ошибка отправки данных: " + error.message);
          }
        } else {
          console.log("🌐 Telegram WebApp недоступен, используем fallback");
          alert("Согласие принято! (Тестовый режим)");
          if (window.close) {
            window.close();
          }
        }
      } catch (error) {
        console.error("❌ Ошибка в acceptConsent():", error);
        alert("Ошибка: " + error.message);
      }
    }

    // Функция отказа
    function denyConsent(event) {
      console.log("🔴 denyConsent() вызвана");
      console.log("🖱️ Событие клика:", event);
      console.log("🎯 Цель события:", event.target);
      console.log("Пользователь отказался");

      try {
        if (window.Telegram && window.Telegram.WebApp) {
          console.log("📱 Отправляем отказ через WebApp...");
          
          // Отправляем простую строку "declined" как в рабочем боте
          const data = "declined";
          console.log("📤 Отправляем данные:", data);
          
          try {
            window.Telegram.WebApp.sendData(data);
            console.log("✅ Отказ отправлен успешно");
            
            // Показываем уведомление пользователю
            alert("❌ Вы отказались от условий. Данные отправлены боту.");
            
            // Закрываем WebApp после отправки данных
            setTimeout(() => {
              window.Telegram.WebApp.close();
              console.log("✅ WebApp закрыт");
            }, 1000);
            
          } catch (error) {
            console.error("❌ Ошибка при отправке отказа:", error);
            alert("Ошибка отправки отказа: " + error.message);
          }
        } else {
          console.log("🌐 Telegram WebApp недоступен, используем fallback");
          alert("Вы отказались от условий. (Тестовый режим)");
          if (window.close) {
            window.close();
          }
        }
      } catch (error) {
        console.error("❌ Ошибка в denyConsent():", error);
        alert("Ошибка: " + error.message);
      }
    }

    // Логирование для отладки
    console.log("📜 Страница загружена");
    console.log("🔍 Telegram WebApp доступен:", !!(window.Telegram && window.Telegram.WebApp));
    
    if (window.Telegram && window.Telegram.WebApp) {
      console.log("📱 WebApp версия:", window.Telegram.WebApp.version);
      console.log("📱 WebApp платформа:", window.Telegram.WebApp.platform);
      console.log("📱 WebApp initDataUnsafe:", window.Telegram.WebApp.initDataUnsafe);
      console.log("📱 WebApp доступные методы:", Object.getOwnPropertyNames(window.Telegram.WebApp));
    }
  </script>

</body>
</html>
